services:
    meshplay:
        image: layer5/meshplay:playground-latest
        environment:
            - PROVIDER_BASE_URLS=https://meshplay.layer5.io
            - ADAPTER_URLS=meshplay-istio:10000 meshplay-linkerd:10001 meshplay-consul:10002 meshplay-nsm:10004 meshplay-app-mesh:10005 meshplay-kuma:10007 meshplay-traefik-mesh:10006 meshplay-nginx-sm:10010 meshplay-cilium:10012
            - EVENT=meshplayLocal
            - PORT=9081
            - MESHPLAY_SERVER_CALLBACK_URL=https://playground.meshplay.io/api/user/token
            - PROVIDER=Meshplay
        volumes:
            - $HOME/.kube:/home/appuser/.kube:ro
            - $HOME/.minikube:$HOME/.minikube:ro
            - /var/run/docker.sock:/var/run/docker.sock
        ports:
            - 9081:9081
        restart: always
    # nginx:
    #     image: nginx:latest
    #     labels:
    #         - "com.centurylinklabs.watchtower.enable=true"
    #     ports:
    #         - 443:443
    #         - 80:80
    #     volumes:
    #         - /etc/letsencrypt/:/etc/letsencrypt/
    #         - /root/meshplay/install/playground/docker/nginx.conf:/etc/nginx/nginx.conf
    #     restart: always
    meshplay-istio:
        image: layer5/meshplay-istio:stable-latest
        ports:
            - 10000:10000
        restart: always
    meshplay-linkerd:
       image: layer5/meshplay-linkerd:stable-latest
       ports:
            - 10001:10001
       restart: always
    meshplay-consul:
       image: layer5/meshplay-consul:stable-latest
       ports:
            - 10002:10002
       restart: always
    meshplay-kuma:
       image: layer5/meshplay-kuma:stable-latest
       ports:
            - 10007:10007
       restart: always
    meshplay-nginx-sm:
       image: layer5/meshplay-nginx-sm:stable-latest
       ports:
            - 10010:10010
       restart: always
    meshplay-cilium:
        image: layer5/meshplay-cilium:stable-latest
        ports:
            - 10012:10012
        restart: always

version: "3"